{% if page.title and page.section and page.mission %}
  {% capture the_title %}{{ page.section }}-{{page.mission}} {{ page.title }}{% endcapture %}
{% else %}
  {% capture the_title %}{{ page.title }}{% endcapture %}
{% endif %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ the_title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  </head>
  <body>
    <div class="container markdown-body">
      <!-- {% include tm/mission_header.html %} -->

      {{ content }}

      <!-- {% include tm/mission_footer.html %} -->
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    {% if jekyll.environment == "production" %}
      <script src="https://unpkg.com/vue@2.3.3/dist/vue.min.js"></script>
    {% else %}
      <script src="https://unpkg.com/vue@2.3.3"></script>
    {% endif %}

    <script type="text/javascript">
      var app = new Vue({
        el: "#app",
        data: {
          current_mission: null,
          toc: toc
        },

        methods: {
          load_mission: function(mid) {
            console.log("loading: " + mid)
            axios.get("/missions/"+ mid +"/index.html")
              .then(function(response){
                app.current_mission = response.data;
                console.log(response);
              })
          },

          close_mission: function() {
            console.log("closing mission!");
            current_mission = null;
          }

        },
        computed: {

        },
        mounted: function(){
        //   axios.get("/missions/1/index.html")
        //     .then(function(response){
        //       console.log(response);
        //       missions.push(response.data)
        //     })
        }

      });
    </script>

    {% include ga.html %}
  </body>
</html>
